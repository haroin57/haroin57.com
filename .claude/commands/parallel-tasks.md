# 並列タスク実行テンプレート

ユーザーのリクエスト: $ARGUMENTS

---

## 実行前チェック

このタスクを並列実行する前に、以下を確認してください：

### 1. ファイル競合チェック
各サブタスクが編集するファイルをリストアップし、重複がないか確認：

| サブタスク | 対象ファイル | 競合リスク |
|-----------|-------------|-----------|
| タスク1 | | |
| タスク2 | | |
| タスク3 | | |

### 2. 共有リソースの特定
以下のファイルは複数タスクで共有される可能性が高い：
- package.json
- tsconfig.json
- index.ts / index.tsx（エクスポート）
- 設定ファイル全般

→ これらを編集するタスクは**1つだけ**にするか、**最後にメインで実行**

### 3. タスクの依存関係
```
タスクA → タスクB（Aの結果が必要）→ 順次実行
タスクA ↔ タスクC（独立）→ 並列実行OK
```

---

## 実行パターン

### パターン1: 完全独立タスク（推奨）
```
Task tool を3つ並列で呼び出し：

prompt: "src/feature-a/ 内のファイルのみを対象に [作業内容]"
prompt: "src/feature-b/ 内のファイルのみを対象に [作業内容]"
prompt: "src/feature-c/ 内のファイルのみを対象に [作業内容]"
```

### パターン2: 調査→実装の2フェーズ
```
フェーズ1（並列）:
- 各領域を調査し、変更計画を報告（編集なし）

フェーズ2（順次 or 計画に基づいて並列）:
- 調査結果に基づいて実装
```

### パターン3: ファイル明示指定
```
prompt: "以下のファイルのみを編集してください：
- src/a.ts
- src/b.ts
上記以外のファイルは絶対に編集しないでください"
```

---

## 競合防止のためのプロンプト追記

各サブタスクのプロンプトに以下を追加：

```
【重要な制約】
1. 指定されたファイル/ディレクトリのみを編集すること
2. package.json, tsconfig.json などの設定ファイルは編集しないこと
3. 他のタスクと共有される可能性のあるファイルを発見した場合は、
   編集せずに報告すること
```

---

## 実行後

- [ ] 各タスクの完了を確認
- [ ] 競合エラーがなかったか確認
- [ ] 必要に応じて設定ファイルを統合更新
- [ ] ビルド/テストを実行して整合性確認
